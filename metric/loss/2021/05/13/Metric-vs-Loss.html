<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Can I use a metric as a loss function? | üí≠Jonathan Blog</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Can I use a metric as a loss function?" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Difference between loss and metrics." />
<meta property="og:description" content="Difference between loss and metrics." />
<link rel="canonical" href="https://jonathan-sands.com/metric/loss/2021/05/13/Metric-vs-Loss.html" />
<meta property="og:url" content="https://jonathan-sands.com/metric/loss/2021/05/13/Metric-vs-Loss.html" />
<meta property="og:site_name" content="üí≠Jonathan Blog" />
<meta property="og:image" content="https://jonathan-sands.com/images/loss_vs_metric.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-05-13T00:00:00-05:00" />
<script type="application/ld+json">
{"url":"https://jonathan-sands.com/metric/loss/2021/05/13/Metric-vs-Loss.html","@type":"BlogPosting","headline":"Can I use a metric as a loss function?","dateModified":"2021-05-13T00:00:00-05:00","datePublished":"2021-05-13T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://jonathan-sands.com/metric/loss/2021/05/13/Metric-vs-Loss.html"},"image":"https://jonathan-sands.com/images/loss_vs_metric.png","description":"Difference between loss and metrics.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://jonathan-sands.com/feed.xml" title="üí≠Jonathan Blog" /><!-- the google_analytics_id gets auto inserted from the config file -->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-179009336-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-179009336-1');
</script>

<link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link href="https://cdn.jsdelivr.net/npm/@primer/css/dist/primer.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.css"><script src="https://cdn.jsdelivr.net/npm/hypothesis/build/boot.js" async></script>

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">üí≠Jonathan Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about-blog/">‚ùìAbout this blog</a><a class="page-link" href="/about-me/">üë±About Me</a><a class="page-link" href="/search/">üîéSearch</a><a class="page-link" href="/categories/">üìÇÔ∏èCategories</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Can I use a metric as a loss function?</h1><p class="page-description">Difference between loss and metrics.</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-05-13T00:00:00-05:00" itemprop="datePublished">
        May 13, 2021
      </time>
       ‚Ä¢ <span class="read-time" title="Estimated read time">
    
    
      5 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#metric">metric</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#loss">loss</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#what-is-a-loss-function">What is a ‚Äúloss‚Äù function?</a></li>
<li class="toc-entry toc-h1"><a href="#what-are-metrics">What are metrics?</a></li>
<li class="toc-entry toc-h1"><a href="#so-what-is-the-difference">So what is the difference?</a></li>
<li class="toc-entry toc-h1"><a href="#can-i-use-the-loss-function-as-my-metric">Can I use the loss function as my metric?</a>
<ul>
<li class="toc-entry toc-h2"><a href="#you-can-except">You can, except‚Ä¶</a></li>
<li class="toc-entry toc-h2"><a href="#otherwise-it-is-fine">Otherwise it is fine</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#can-i-use-my-metric-as-the-loss-function">Can I use my metric as the loss function?</a>
<ul>
<li class="toc-entry toc-h2"><a href="#you-cant-for-several-reasons">You can‚Äôt, for several reasons</a></li>
<li class="toc-entry toc-h2"><a href="#it-may-not-be-ideal">It may not be ideal</a></li>
<li class="toc-entry toc-h2"><a href="#sure-go-ahead">Sure go ahead</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#is-it-clearer-now-">Is it clearer now ?</a></li>
</ul><h1 id="what-is-a-loss-function">
<a class="anchor" href="#what-is-a-loss-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>What is a ‚Äúloss‚Äù function?</h1>

<p>Optimization algorithms try to optimize an objective function either by maximizing it or by minimizing it.</p>

<p>A loss function is by convention an objective function we wish to minimize.</p>

<p>‚ÄúA loss function or cost function is a function that maps an event or values of one or more variables onto a real number intuitively representing some ‚Äúcost‚Äù associated with the event. An optimization problem seeks to minimize a loss function.‚Äù (<a href="https://en.wikipedia.org/wiki/Loss_function">Wikipedia</a>)</p>

<p><strong>In other words</strong>, the loss function will return a smaller number for a better model.</p>

<h1 id="what-are-metrics">
<a class="anchor" href="#what-are-metrics" aria-hidden="true"><span class="octicon octicon-link"></span></a>What are metrics?</h1>

<p>A metric is a function that is used to judge the performance of our model.</p>

<p>Some well known metrics for classification:</p>

<p><img src="/images/classification_metrics.png" alt="classification metrics table" class="full-width"></p>

<p>Some well known metrics for regression:</p>

<p><img src="/images/regression_metrics.png" alt="" title="regression metrics table"></p>

<div class="flash">
    <svg class="octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z"></path></svg>
    <strong>Note: </strong>There are many more metrics for these problems and some for other problems. We don't try to enumerate them all here.
</div>

<p>Choosing metrics representative of the problem at hand and what matters isn‚Äôt always obvious.</p>

<p>Take the example of building a model that classifies whether <em>Yes</em> or <em>No</em> a patient with COVID-19 should be sent to intensive care, using supervised learning on a labeled dataset built from real world data.
 Miss rate (also called False negative rate) would be a good metric since you really want to the amount of times you predict <em>No</em> falsely to be minimal. Lives are at risk ! You may also want to take a look at your Fall-out (False positive rate) to avoid saturating the intensive care unit with people that don‚Äôt need it.</p>

<h1 id="so-what-is-the-difference">
<a class="anchor" href="#so-what-is-the-difference" aria-hidden="true"><span class="octicon octicon-link"></span></a>So what is the difference?</h1>

<p>The loss function is the function your algorithm tries to minimize and the metric is what you evaluate your model on.
You will always need a metric to evaluate your model but particular algorithms will rely on a separate loss function during training, often as a proxy.</p>

<h1 id="can-i-use-the-loss-function-as-my-metric">
<a class="anchor" href="#can-i-use-the-loss-function-as-my-metric" aria-hidden="true"><span class="octicon octicon-link"></span></a>Can I use the loss function as my metric?</h1>

<p>Here we are talking about loss functions that actually work for your particular algorithm. As you will see later, <strong>not all metrics can be used as a loss function</strong>.</p>

<h2 id="you-can-except">
<a class="anchor" href="#you-can-except" aria-hidden="true"><span class="octicon octicon-link"></span></a>You can, except‚Ä¶</h2>

<p>Sometimes, loss function values can be <strong>confusing and hard to interpret</strong>.</p>

<p><strong>For example</strong>, if you use cross-entropy loss on a classification problem and get an output value of 2, you know it is better than 2.5 since you want to minimize it but how do you know if a loss of 2 or an improvement of 0.5 is actually any good?</p>

<p>That‚Äôs when metrics come into play.</p>

<p>Metrics are defined for human consumption and are what you care about when evaluating your model.</p>

<div class="flash flash-success">
    <svg class="octicon octicon-checklist octicon octicon-checklist octicon octicon-checklist octicon octicon-checklist octicon octicon-checklist octicon octicon-checklist octicon octicon-checklist octicon octicon-checklist octicon octicon-checklist octicon octicon-checklist octicon octicon-checklist octicon octicon-checklist" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M2.5 1.75a.25.25 0 01.25-.25h8.5a.25.25 0 01.25.25v7.736a.75.75 0 101.5 0V1.75A1.75 1.75 0 0011.25 0h-8.5A1.75 1.75 0 001 1.75v11.5c0 .966.784 1.75 1.75 1.75h3.17a.75.75 0 000-1.5H2.75a.25.25 0 01-.25-.25V1.75zM4.75 4a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-4.5zM4 7.75A.75.75 0 014.75 7h2a.75.75 0 010 1.5h-2A.75.75 0 014 7.75zm11.774 3.537a.75.75 0 00-1.048-1.074L10.7 14.145 9.281 12.72a.75.75 0 00-1.062 1.058l1.943 1.95a.75.75 0 001.055.008l4.557-4.45z"></path></svg>
    <strong>Tip: </strong>You can use one or more metrics (even 0) for evaluating model performance.
</div>

<h2 id="otherwise-it-is-fine">
<a class="anchor" href="#otherwise-it-is-fine" aria-hidden="true"><span class="octicon octicon-link"></span></a>Otherwise it is fine</h2>

<p>Sometimes your loss function can be used as a metric, meaning it is being minimized by the algorithm and humans can interpret its outputs easily.</p>

<p>An example would be <a href="https://en.wikipedia.org/wiki/Root-mean-square_deviation">Root-Mean-Square error</a>.</p>

<h1 id="can-i-use-my-metric-as-the-loss-function">
<a class="anchor" href="#can-i-use-my-metric-as-the-loss-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>Can I use my metric as the loss function?</h1>

<p><strong>Not always!</strong></p>

<h2 id="you-cant-for-several-reasons">
<a class="anchor" href="#you-cant-for-several-reasons" aria-hidden="true"><span class="octicon octicon-link"></span></a>You can‚Äôt, for several reasons</h2>

<p><strong>Some algorithms require the loss function to be differentiable</strong> and some metrics, such as accuracy or any other step function, are not.</p>

<p>These algorithms usually use some form of gradient descent to update the parameters. This is the case for neural network weight stepping, where the partial derivative of the loss with respect to each weight is calculated.</p>

<p>Let‚Äôs illustrate this by using accuracy on a classification problem where the model assigns a probability to each mutually exclusive class for a given input.</p>

<p>In this case, a small change to a parameter‚Äôs weight may not change the outcome of our predictions but only our confidence in them, meaning the accuracy remains the same.  The partial derivative of the loss with respect to this parameter would be 0 (infinity at the threshold) most of the time, preventing our model from learning (a step of 0 would keep the weight and model as is).</p>

<p>In other words, we want the small changes made to the parameter weights to be reflected in the loss function.</p>

<p><strong>Some algorithms</strong> don‚Äôt require their function to be differentiable but <strong>would not work with some functions by their nature</strong>. You can read <a href="https://sebastianraschka.com/faq/docs/decisiontree-error-vs-entropy.html">this post</a> as an example of why classification error can‚Äôt be used for decision tree.</p>

<h2 id="it-may-not-be-ideal">
<a class="anchor" href="#it-may-not-be-ideal" aria-hidden="true"><span class="octicon octicon-link"></span></a>It may not be ideal</h2>

<p>Some objective functions are <em>easier</em> to optimize than others. We might want to use a proxy <em>easy</em> loss function instead of a <em>hard</em> one.</p>

<p>We often choose to optimize <strong>smooth and convex</strong> loss functions because:</p>

<ul>
  <li>They are differentiable anywhere.</li>
  <li>A minimum is always a global minimum.</li>
</ul>

<p>Using gradient descent on such function will lead you surely towards the global minima and not get stuck in a local mimimum or saddle point.</p>

<p>There are plenty of ressources about convex functions on the internet. I‚Äôll share <a href="https://www.quora.com/Why-are-the-popular-loss-functions-convex-especially-in-the-context-of-deep-learning/answer/Vicente-Malave?ch=10&amp;share=7fc9600d&amp;srid=02o4m">one</a> with you. I personally didn‚Äôt get all of it but maybe you will.</p>

<p>Some algorithms seem to empirically work well with non-convex functions. This is the case of Deep Learning for example, where we often use gradient descent on a non-convex loss function.</p>

<div class="flash">
    <svg class="octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info octicon octicon-info" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z"></path></svg>
    <strong>Note: </strong>
The stochasticity introduced by the use of minibatch, random initialization or momentum methods help avoid saddle points and local minimas to some extent, but it also seems like increasing network size increases the chance of finding a local minimum with good generalization. <a href="https://arxiv.org/pdf/1412.0233v3.pdf">Refer to this</a> (or to the first part of the 4th chapter of <a href="https://www.oreilly.com/library/view/fundamentals-of-deep/9781491925607/">*Fundamentals of Deep Learning by Nikhil Buduma*</a> for a more intuitive answer).

</div>

<p>Another thing you need to be careful of is that different loss functions bring different assumptions to the model. For example, the logistic regression loss assumes a Bernoulli distribution.</p>

<h2 id="sure-go-ahead">
<a class="anchor" href="#sure-go-ahead" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sure go ahead</h2>
<p>If your metric doesn‚Äôt fall into the limitations mentioned above then go ahead ! Optimizing directly on what matters (the metric) is ideal.</p>

<h1 id="is-it-clearer-now-">
<a class="anchor" href="#is-it-clearer-now-" aria-hidden="true"><span class="octicon octicon-link"></span></a>Is it clearer now ?</h1>

<p>Did I help clear things up or is it even more confusing now? Or am I mistaken somehow?
You can share your questions / remarks regarding the subject by writing a comment or annotating the text using <a href="https://web.hypothes.is/">Hypothes.is</a>!</p>

  </div><a class="u-url" href="/metric/loss/2021/05/13/Metric-vs-Loss.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Track / organize my knowledge and share it with others</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/Jonathan2021" title="Jonathan2021"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/JonathanSands14" title="JonathanSands14"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
